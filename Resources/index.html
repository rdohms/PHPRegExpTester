<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
	<head>
		<title>PHP RegExp Tester</title>
		<script src="js/formHandler.js" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript" src="js/jquery-1.4.2.js"></script>	 
		<link rel="stylesheet" type="text/css" href="css/app.css" media="all">
	</head>
	<body>
		<h1>
			PHP RegExp Tester
		</h1>
		<div class="window">

			<div class="btn full">
				<input type="button" value="Execute" id="invokePHP">
			</div>
						
			<div class="fifty left tall">
				<div class="">
					<label for="rg">RegExp</label>
					<input type="text" name="regexp" value="/([0-9]{2})/" id="rg">
				</div>
				
				<div class="">
					<label for="tt">Target Text</label> 
					<textarea id="tt" name="target_text" cols="30" rows="10">era uma vez 45 gatos em uma rua de 34 casas</textarea>
				</div>
			</div>

			<div class="fifty right tall">
				<div id="p_match_dump" class="res_box half_tall">

				</div>

				<div id="p_match_all_dump" class="res_box half_tall">

				</div>
			</div>

			

		</div>
		
		<script type="text/php">
		  include("libs/RegExpHandler.php");

	
		  $jQuery()->ready( function () use (&$jQuery) {

			$jQuery('#invokePHP')->live('click', function () use (&$jQuery) {

				$handler = new \RegExpHandler( $jQuery('#rg')->val(), $jQuery('#tt')->val());
				$handler->process();

				// Handle preg_match results
				$pmr = $handler->getPmMatches();
				$jQuery('#p_match_dump')->html('<p class="rtype">Expression matches</p>');
				$jQuery('#p_match_dump')->append('<p class="rvalue">'.nl2br($pmr['expr']).'</p>');
				$jQuery('#p_match_dump')->append('<p class="rtype">Parenthesis matches</p>');
				$jQuery('#p_match_dump')->append('<p class="rvalue">'.nl2br($pmr['mtch']).'</p>');
				
				//Handle preg_match_all results
				$pmra = $handler->getPmaMatches();
				$jQuery('#p_match_all_dump')->html('<p class="rtype">Expression matches</p>');
				$jQuery('#p_match_all_dump')->append('<p class="rvalue">'.nl2br($pmra['expr']).'</p>');
				$jQuery('#p_match_all_dump')->append('<p class="rtype">Parenthesis matches</p>');
				$jQuery('#p_match_all_dump')->append('<p class="rvalue">'.nl2br($pmra['mtch']).'</p>');

			} );

		  } );
		</script>

	</body>
</html>
